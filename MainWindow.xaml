<Window x:Class="StickyMiniWeb.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
    mc:Ignorable="d"
    Title="Mini Web"
    Width="320" Height="420"
    MinWidth="240" MinHeight="280"
    WindowStartupLocation="Manual"
    Topmost="True"
    Closing="Window_Closing">

    <Grid x:Name="LayoutRoot" Margin="8">
        <Grid.RowDefinitions>
            <RowDefinition x:Name="TaskbarToggleRow" Height="Auto"/>
            <RowDefinition x:Name="ContentRow" Height="*"/>
            <RowDefinition x:Name="ToolbarRow" Height="Auto"/>
        </Grid.RowDefinitions>

        <ToggleButton x:Name="TaskbarModeToggle"
                      Grid.Row="0"
                      Margin="0,0,0,8"
                      MinHeight="14"
                      HorizontalAlignment="Stretch"
                      Background="#F0F0F0"
                      BorderThickness="0"
                      Checked="TaskbarModeToggle_Checked"
                      Unchecked="TaskbarModeToggle_Unchecked"
                      ToolTip="Taskbar-only mode">
            <Viewbox Width="20" Height="20" HorizontalAlignment="Center" VerticalAlignment="Center">
                <Canvas Width="24" Height="24">
                    <Path Fill="#4A4A4A" Data="M3 6h18v5H3zM5 13h14v2H5zM7 16h10v2H7z"/>
                </Canvas>
            </Viewbox>
        </ToggleButton>

        <Grid Grid.Row="1">
            <wv2:WebView2 x:Name="Web" />
        </Grid>

        <Grid x:Name="ToolbarPanel"
              Grid.Row="2"
              Margin="0,8,0,0"
              Background="#AAFFFFFF">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <ToggleButton x:Name="ShowSettingsButton"
                          Grid.Column="0"
                          Width="24"
                          Height="24"
                          Margin="0,0,6,0"
                          Click="ShowSettingsButton_Click"
                          BorderThickness="0"
                          Background="Transparent"
                          BorderBrush="Transparent">
                <Viewbox Width="16" Height="16">
                    <Canvas Width="24" Height="24">
                        <Path Fill="Gray" Data="M19.43 12.98c.04-.32.07-.65.07-.98s-.03-.66-.07-.98l2.11-1.65a.5.5 0 0 0 .12-.65l-2-3.46a.5.5 0 0 0-.61-.22l-2.49 1a7.03 7.03 0 0 0-1.69-.98l-.38-2.65A.488.488 0 0 0 14 2h-4a.5.5 0 0 0-.5.42l-.38 2.65c-.63.27-1.22.61-1.77 1.01l-2.49-1a.5.5 0 0 0-.61.22l-2 3.46a.5.5 0 0 0 .12.65l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65a.5.5 0 0 0-.12.65l2 3.46c.14.24.44.33.68.22l2.49-1c.54.4 1.13.74 1.77 1.01l.38 2.65c.05.28.27.48.5.48h4c.23 0 .45-.2.5-.48l.38-2.65c.63-.27 1.22-.61 1.77-1.01l2.49 1c.24.09.54.02.68-.22l2-3.46a.5.5 0 0 0-.12-.65l-2.11-1.65zM12 15.5A3.5 3.5 0 1 1 12 8.5a3.5 3.5 0 0 1 0 7z"/>
                    </Canvas>
                </Viewbox>
            </ToggleButton>

            <TextBox x:Name="UrlBox"
                     Grid.Column="1"
                     Text="http://localhost:8000"
                     MinWidth="60"
                     VerticalAlignment="Center"
                     KeyDown="UrlBox_KeyDown"
                     Visibility="Collapsed"
                     Margin="0,0,6,0"
                     Background="Transparent"
                     BorderThickness="0" />

            <Button x:Name="OpenButton"
                    Grid.Column="2"
                    Width="28"
                    Height="28"
                    Margin="0,0,6,0"
                    Click="Open_Click"
                    Visibility="Collapsed"
                    BorderThickness="0"
                    Background="Transparent"
                    ToolTip="Reload">
                <Viewbox Width="16" Height="16">
                    <Canvas Width="24" Height="24">
                        <Path Fill="Gray" Data="M12 4V1L7 6l5 5V7c3.31 0 6 2.69 6 6 0 3.31-2.69 6-6 6s-6-2.69-6-6h-2c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/>
                    </Canvas>
                </Viewbox>
            </Button>

            <ToggleButton x:Name="TopmostToggle"
                          Grid.Column="3"
                          Width="28"
                          Height="28"
                          Checked="TopmostToggle_Checked"
                          Unchecked="TopmostToggle_Checked"
                          Visibility="Collapsed"
                          BorderThickness="0"
                          Background="Transparent"
                          ToolTip="Always on top">
                <Viewbox Width="16" Height="16">
                    <TextBlock Text="&#xE718;"
                               FontFamily="Segoe Fluent Icons"
                               Foreground="Gray"
                               VerticalAlignment="Center"
                               HorizontalAlignment="Center"/>
                </Viewbox>
            </ToggleButton>

            <StackPanel x:Name="AutoRefreshPanel"
                        Grid.Row="1"
                        Grid.Column="0"
                        Grid.ColumnSpan="4"
                        Orientation="Horizontal"
                        HorizontalAlignment="Left"
                        Visibility="Collapsed"
                        Margin="0,6,0,6"
                        VerticalAlignment="Center">
                <ToggleButton x:Name="AutoRefreshToggle"
                              Width="24"
                              Height="24"
                              Checked="AutoRefreshToggle_Checked"
                              Unchecked="AutoRefreshToggle_Checked"
                              BorderThickness="0"
                              Background="Transparent"
                              ToolTip="Auto refresh">
                    <Viewbox Width="16" Height="16">
                        <TextBlock Text="&#xE895;"
                                   FontFamily="Segoe Fluent Icons"
                                   Foreground="Gray"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Center"/>
                    </Viewbox>
                </ToggleButton>
                <TextBlock Text="Interval"
                           VerticalAlignment="Center"
                           Margin="6,0,6,0"
                           Foreground="Gray"/>
                <TextBox x:Name="AutoRefreshIntervalBox"
                         Width="48"
                         VerticalContentAlignment="Center"
                         Text="30"
                         BorderThickness="0,0,0,1"
                         Background="Transparent"
                         TextAlignment="Center"
                         PreviewTextInput="AutoRefreshIntervalBox_PreviewTextInput"
                         TextChanged="AutoRefreshIntervalBox_TextChanged"
                         LostFocus="AutoRefreshIntervalBox_LostFocus"
                         Margin="0,0,6,0"/>
                <TextBlock Text="sec"
                           VerticalAlignment="Center"
                           Foreground="Gray"/>
            </StackPanel>

            <StackPanel x:Name="BackgroundColorPanel"
                        Grid.Row="2"
                        Grid.Column="0"
                        Grid.ColumnSpan="4"
                        Orientation="Horizontal"
                        HorizontalAlignment="Left"
                        Visibility="Collapsed"
                        Margin="0,0,0,6"
                        VerticalAlignment="Center">
                <TextBlock Text="Background HEX"
                           VerticalAlignment="Center"
                           Margin="0,0,6,0"
                           Foreground="Gray"/>
                <TextBox x:Name="BackgroundColorBox"
                         Width="80"
                         VerticalContentAlignment="Center"
                         Text="FFFFFF"
                         BorderThickness="0,0,0,1"
                         Background="Transparent"
                         TextAlignment="Center"
                         KeyDown="BackgroundColorBox_KeyDown"
                         LostFocus="BackgroundColorBox_LostFocus"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
